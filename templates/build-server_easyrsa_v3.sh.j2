#!/bin/sh

# This file was generated by Ansible
# Do NOT modify this file by hand!

. {{ openvpn_system_etcdir }}/{{ __openvpn_service_name }}/easyrsa-vars

export EASY_RSA_BIN={{ openvpn_easyrsa_v3_binary }}

$EASY_RSA_BIN init-pki && \
export EASYRSA_REQ_CN="openvpn CA" && \
$EASY_RSA_BIN build-ca nopass && \
export EASYRSA_REQ_CN="openvpn server" && \
$EASY_RSA_BIN gen-req  server nopass && \
$EASY_RSA_BIN sign-req server server  && \
$EASY_RSA_BIN gen-dh
mv {{ openvpn_system_etcdir }}/{{ __openvpn_service_name }}/{{ __my_openvpn_instance.openvpn_keydir }}/dh.pem  {{ openvpn_system_etcdir }}/{{ __openvpn_service_name }}/{{ __my_openvpn_instance.openvpn_keydir }}/dh{{ __my_openvpn_instance.openvpn_key_size }}.pem
