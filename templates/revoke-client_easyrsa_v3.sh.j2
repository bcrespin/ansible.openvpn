#!/bin/sh

# This file was generated by ansible
# DO NOT modify this file by hand
if [ -f "{{ openvpn_system_etcdir }}/{{ __openvpn_service_name }}/{{ __my_openvpn_instance.openvpn_keydir }}/issued/$1.crt" ]; then
  . {{ openvpn_system_etcdir }}/{{ __openvpn_service_name }}/easyrsa-vars
  export EASY_RSA_BIN={{ openvpn_easyrsa_v3_binary }}
  $EASY_RSA_BIN revoke $1  && \
  $EASY_RSA_BIN gen-crl && \
  rm {{ openvpn_system_etcdir }}/{{ __openvpn_service_name }}/{{ __my_openvpn_instance.openvpn_keydir }}/issued/$1.crt &&\
  rm {{ openvpn_system_etcdir }}/{{ __openvpn_service_name }}/{{ __my_openvpn_instance.openvpn_keydir }}/reqs/$1.req &&\
  rm {{ openvpn_system_etcdir }}/{{ __openvpn_service_name }}/{{ __my_openvpn_instance.openvpn_keydir }}/private/$1.key

fi
